<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Login | Painel IPTV</title>
</head>
<body>

  <h2>Login - Painel IPTV</h2>

  <input type="email" id="email" placeholder="Email">
  <br><br>

  <input type="password" id="senha" placeholder="Senha">
  <br><br>

  <button onclick="login()">Entrar</button>

  <p id="msg"></p>

  <!-- IMPORTAÇÃO DO SUPABASE (APENAS UMA VEZ) -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

  <!-- SCRIPT PRINCIPAL -->
  <script>
    // ⚠️ COLE SUAS CHAVES AQUI
    const SUPABASE_URL = 'https://jruvyvldteoebjncldqm.supabase.co';
    const SUPABASE_KEY = 'sb_publishable_9qDiK7N_veZo8IxX4w5DFw_JZOMD2iY';

    // ⚠️ SUPABASE CRIADO UMA ÚNICA VEZ
    const supabase = window.supabase.createClient(
      SUPABASE_URL,
      SUPABASE_KEY
    );

    // FUNÇÃO GLOBAL (o botão consegue chamar)
    async function login() {
      const email = document.getElementById('email').value;
      const senha = document.getElementById('senha').value;

      const { error } = await supabase.auth.signInWithPassword({
        email: email,
        password: senha
      });

      if (error) {
        document.getElementById('msg').innerText =
          'Erro no login: ' + error.message;
      } else {
        window.location.href = 'dashboard.html';
      }
    }
  </script>

</body>
</html>
