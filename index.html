<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Login | Painel IPTV</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

  <h2>Login - Painel IPTV</h2>

  <input type="email" id="email" placeholder="Email"><br><br>
  <input type="password" id="password" placeholder="Senha"><br><br>

  <button onclick="login()">Entrar</button>

  <p id="msg"></p>

  <script>
  const supabaseUrl = 'https://jruvyldteoebjncldqm.supabase.co';
  const supabaseKey = 'sb_publishable_9qDiK7N_veZo8IxX4w5DFw_JZOMD2iY';
  const supabase = supabase.createClient(supabaseUrl, supabaseKey);

  async function login() {
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

   const { data, error } = await supabase.auth.signInWithPassword({
  email,
  password
});

   if (error) {
  document.getElementById('msg').innerText = error.message;
} else {
  window.location.href = 'dashboard.html';
}
    // ✅ Aguarda a sessão ser salva
    document.getElementById('msg').innerText = 'Login OK...';

    setTimeout(() => {
      window.location.href = 'dashboard.html';
    }, 800);
  }
</script>

</body>
</html>
